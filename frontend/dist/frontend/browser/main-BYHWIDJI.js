import{$ as U,A as M,Aa as f,Ba as D,Ca as g,D as s,Da as b,E as w,K as u,Z as P,_ as E,aa as F,ba as O,c as y,ca as d,d as i,e as m,f as S,fa as _,ga as c,ia as k,ja as x,ka as A,la as I,n as l,pa as N,q as h,sa as R,ta as j,u as a,v as n,w as p,xa as G,za as z}from"./chunk-4ITP7NOE.js";import{a as v,e as C}from"./chunk-5FZOKLP6.js";var B=(()=>{class e{constructor(){this.url=`${D.api}/auth`,this.http=i(E),this.header=b()}login(o){return this.http.post(this.url+"/login",o,{headers:this.header})}verifyToken(){return this.header=b(),this.http.post(this.url,"/verify-token",{headers:this.header})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var H=(()=>{class e{constructor(){this.fb=i(G),this.router=i(d),this.popup=i(f),this.authService=i(B),this.form=this.fb.group({username:["",[x.required]],password:["",[x.required]]}),this.submitting=!1}ngOnInit(){}onSubmit(){if(this.form.invalid){this.popup.showError("Ingrese usuario y contrase\xF1a");return}this.submitting=!0;let{username:o,password:t}=this.form.value;this.authService.login({username:o,password:t}).subscribe({next:r=>{g.getInstance().setUser(v({token:r.token},r.user)),this.popup.showSuccess("Ingreso exitoso"),this.router.navigateByUrl("/home")},error:r=>{this.submitting=!1,this.popup.showError(r.error.message)}})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-login-page"]],standalone:!0,features:[u],decls:24,vars:3,consts:[[1,"container-prin"],[1,"card",3,"ngSubmit","formGroup"],["flex","",2,"justify-content","center"],["src","./../../../../assets/images/logo.png",2,"height","80px"],[1,"title"],[1,"label"],["formControlName","username","type","text","placeholder","Usuario"],["formControlName","password","type","password","placeholder","Contrase\xF1a"],["type","submit",1,"btn",3,"disabled"],[1,"hint"]],template:function(t,r){t&1&&(a(0,"div",0)(1,"form",1),M("ngSubmit",function(){return r.onSubmit()}),a(2,"div",2),p(3,"img",3),n(),a(4,"h1",4),s(5,"Iniciar sesi\xF3n"),n(),a(6,"label",5)(7,"span"),s(8,"Usuario"),n(),p(9,"input",6),n(),a(10,"label",5)(11,"span"),s(12,"Contrase\xF1a"),n(),p(13,"input",7),n(),a(14,"button",8),s(15),n(),a(16,"p",9),s(17,"Usa "),a(18,"strong"),s(19,"admin"),n(),s(20,"/"),a(21,"strong"),s(22,"admin"),n(),s(23," para demo."),n()()()),t&2&&(l(),h("formGroup",r.form),l(13),h("disabled",r.submitting),l(),w(r.submitting?"Validando...":"Entrar"))},dependencies:[P,z,N,k,A,I,R,j,c],styles:[".container-prin[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#e1edffd6}.card[_ngcontent-%COMP%]{width:100%;max-width:380px;padding:28px;border-radius:10px;background:#fff;box-shadow:0 8px 30px #161b2814;display:flex;flex-direction:column;gap:12px}.title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:1.25rem;color:#141414}.label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.9rem}.label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 12px;border-radius:8px;border:1px solid #e6e9ef;font-size:.95rem}.btn[_ngcontent-%COMP%]{margin-top:6px;padding:10px 12px;border:none;border-radius:8px;background:#1f6feb;color:#fff;font-weight:600;cursor:pointer}.btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:default}.hint[_ngcontent-%COMP%]{margin:8px 0 0;font-size:.85rem;color:#7b7f87}@media (max-width: 420px){.card[_ngcontent-%COMP%]{padding:18px;margin:0 12px}}"]})}}return e})();var L=(e,J)=>C(void 0,null,function*(){let o=g.getInstance(),t=i(d),r=i(f);return o.User.token=="TOKEN"||o.User.token==null||o.User.token==""?(r.showError("No tiene Autorizacion"),t.navigateByUrl(""),!1):o.User.token?!0:(r.showError("No tiene Autorizacion"),t.navigateByUrl(""),!1)});var V=[{path:"login",component:H},{path:"home",canActivate:[L],loadChildren:()=>import("./chunk-JU4KPS4C.js").then(e=>e.HomeRoutes)},{path:"**",redirectTo:"login"}];var q={providers:[_(V)]};var K=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=m({type:e,selectors:[["app-root"]],standalone:!0,features:[u],decls:1,vars:0,template:function(t,r){t&1&&p(0,"router-outlet")},dependencies:[c,O]})}}return e})();F(K,{providers:[q.providers,S(U)]}).catch(e=>console.error(e));
